(this["webpackJsonpdoordash-app"]=this["webpackJsonpdoordash-app"]||[]).push([[0],{172:function(e,t,n){},173:function(e,t,n){},250:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),c=n(28),r=n.n(c),i=(n(172),n(5)),o=n(258),l=n(255),u=(n(173),n(17)),j=n(19),d=n(21),h=n(20),b=n(163),f=n(253),m=n(257),p=n(65),O=n(260),g=n(261),x=function(e){var t="/login?username=".concat(e.username,"&password=").concat(e.password);return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to log in")}))},y=function(e){return fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to sign up")}))},v=n(8),S=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={loading:!1},e.onFinish=function(t){e.setState({loading:!0}),console.log("Received values of form: ",t),x(t).then((function(){b.b.success("This is a success message"),e.props.onSucess()})).catch((function(){b.b.error("This is an error message")})).finally((function(){e.setState({loading:!1})}))},e}return Object(j.a)(n,[{key:"render",value:function(){return Object(v.jsxs)(f.a,{name:"normal_login",style:{width:300,margin:"auto"},onFinish:this.onFinish,children:[Object(v.jsx)(f.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(v.jsx)(m.a,{prefix:Object(v.jsx)(O.a,{}),placeholder:"Username"})}),Object(v.jsx)(f.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(v.jsx)(m.a.Password,{prefix:Object(v.jsx)(g.a,{}),type:"password",placeholder:"Password"})}),Object(v.jsx)(f.a.Item,{children:Object(v.jsx)(p.a,{type:"primary",htmlType:"submit",loading:this.state.loading,children:"Log in"})})]})}}]),n}(a.Component),w=S,C=n(88),F=n(81),I=n(254),P=n(252),T=n(167),k=C.a.Option,E=function(e){var t=e.itemId,n=Object(a.useState)(!1),s=Object(i.a)(n,2),c=s[0],r=s[1];return Object(v.jsx)(F.a,{title:"Add to shopping cart",children:Object(v.jsx)(p.a,{loading:c,type:"primary",icon:Object(v.jsx)(T.a,{}),onClick:function(){r(!0),function(e){return fetch("/order/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to add menu item to shopping cart")}))}(t).then((function(){return b.b.success("Successfully add item")})).catch((function(e){return b.b.error(e.message)})).finally((function(){r(!1)}))}})})};var L=function(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(),o=Object(i.a)(r,2),l=o[0],u=o[1],j=Object(a.useState)([]),d=Object(i.a)(j,2),h=d[0],f=d[1],m=Object(a.useState)(!1),p=Object(i.a)(m,2),O=p[0],g=p[1],x=Object(a.useState)(!1),y=Object(i.a)(x,2);return y[0],y[1],Object(a.useEffect)((function(){g(!0),fetch("/restaurants").then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to get restaurants");return e.json()})).then((function(e){f(e)})).catch((function(e){return b.b.error(e.message)})).finally((function(){g(!1)}))}),[]),Object(a.useEffect)((function(){var e;l&&(g(!0),(e=l,fetch("/restaurant/".concat(e,"/menu")).then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to get menus");return e.json()}))).then((function(e){c(e)})).catch((function(e){return b.b.error(e.message)})).finally((function(){g(!1)})))}),[l]),Object(v.jsxs)("div",{children:[Object(v.jsx)(C.a,{value:l,placeholder:"Select a restaurant",loading:O,style:{width:300},onSelect:function(e){return u(e)},children:h.map((function(e){return Object(v.jsx)(k,{value:e.id,children:e.name},e.id)}))}),l&&Object(v.jsx)(I.b,{style:{marginTop:20},grid:{gutter:16,xs:1,sm:2,md:4,lg:4,xl:3,xxl:3},dataSource:s,renderItem:function(e){return Object(v.jsx)(I.b.Item,{children:Object(v.jsxs)(P.a,{title:e.name,extra:Object(v.jsx)(E,{itemId:e.id}),children:[Object(v.jsx)("img",{src:e.imageUrl,alt:e.name,style:{height:"auto",width:"100%",display:"block"}}),"Price: ".concat(e.price)]})})}})]})},M=n(259),q=l.a.Text,R=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(),r=Object(i.a)(c,2),o=r[0],l=r[1],u=Object(a.useState)(!1),j=Object(i.a)(u,2),d=j[0],h=j[1],f=Object(a.useState)(!1),m=Object(i.a)(f,2),O=m[0],g=m[1];Object(a.useEffect)((function(){n&&(h(!0),fetch("/cart").then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to get shopping cart data");return e.json()})).then((function(e){l(e)})).catch((function(e){b.b.error(e.message)})).finally((function(){h(!1)})))}),[n]);var x=function(){s(!1)};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(p.a,{type:"primary",shape:"round",onClick:function(){s(!0)},children:"Cart"}),Object(v.jsx)(M.a,{title:"My Shopping Cart",onClose:x,visible:n,width:520,footer:Object(v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(v.jsx)(q,{strong:!0,children:"Total price: $".concat(null===o||void 0===o?void 0:o.totalPrice)}),Object(v.jsxs)("div",{children:[Object(v.jsx)(p.a,{onClick:x,style:{marginRight:8},children:"Cancel"}),Object(v.jsx)(p.a,{onClick:function(){g(!0),fetch("/checkout").then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to checkout")})).then((function(){b.b.success("Successfully checkout"),s(!1)})).catch((function(e){b.b.error(e.message)})).finally((function(){g(!1)}))},type:"primary",loading:O,disabled:d||0===(null===o||void 0===o?void 0:o.orderItemList.length),children:"Checkout"})]})]}),children:Object(v.jsx)(I.b,{loading:d,itemLayout:"horizontal",dataSource:null===o||void 0===o?void 0:o.orderItemList,renderItem:function(e){return Object(v.jsx)(I.b.Item,{children:Object(v.jsx)(I.b.Item.Meta,{title:e.menuItem.name,description:"$".concat(e.price)})})}})})]})},N=n(256),A=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={displayModal:!1},e.handleCancel=function(){e.setState({displayModal:!1})},e.signupOnClick=function(){e.setState({displayModal:!0})},e.onFinish=function(t){y(t).then((function(){e.setState({displayModal:!1}),b.b.success("Successfully signed up")})).catch((function(e){b.b.error(e.message)})).finally((function(){e.handleCancel()}))},e.render=function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(p.a,{shape:"round",type:"primary",onClick:e.signupOnClick,children:"Register"}),Object(v.jsx)(N.a,{title:"Register",visible:e.state.displayModal,onCancel:e.handleCancel,footer:null,destroyOnClose:!0,children:Object(v.jsxs)(f.a,{name:"normal_register",initialValues:{remember:!0},onFinish:e.onFinish,preserve:!1,children:[Object(v.jsx)(f.a.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"}],children:Object(v.jsx)(m.a,{prefix:Object(v.jsx)(O.a,{}),placeholder:"Email"})}),Object(v.jsx)(f.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(v.jsx)(m.a,{prefix:Object(v.jsx)(g.a,{}),placeholder:"Password"})}),Object(v.jsx)(f.a.Item,{name:"firstName",rules:[{required:!0,message:"Please input your first name!"}],children:Object(v.jsx)(m.a,{placeholder:"firstname"})}),Object(v.jsx)(f.a.Item,{name:"lastName",rules:[{required:!0,message:"Please input your last name!"}],children:Object(v.jsx)(m.a,{placeholder:"lastname"})}),Object(v.jsx)(f.a.Item,{children:Object(v.jsx)(p.a,{type:"primary",htmlType:"submit",children:"Register"})})]})})]})},e}return n}(s.a.Component),B=A,H=o.a.Header,J=o.a.Content,U=l.a.Title;var $=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],s=t[1];return Object(v.jsxs)(o.a,{style:{height:"100vh"},children:[Object(v.jsx)(H,{children:Object(v.jsxs)("div",{className:"header",children:[Object(v.jsx)(U,{level:2,style:{color:"white",lineHeight:"inherit",marginBottom:0},children:"Lai Food"}),Object(v.jsx)("div",{children:n?Object(v.jsx)(R,{}):Object(v.jsx)(B,{})})]})}),Object(v.jsx)(J,{style:{padding:"50px",maxHeight:"calc(100% - 64 px)",overflowY:"auto"},children:n?Object(v.jsx)(L,{}):Object(v.jsx)(w,{onSucess:function(){return s(!0)}})})]})},_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,262)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};r.a.render(Object(v.jsx)($,{}),document.getElementById("root")),_()}},[[250,1,2]]]);
//# sourceMappingURL=main.84cd2fb3.chunk.js.map